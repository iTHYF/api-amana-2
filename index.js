const express = require('express');
const bodyParser = require('body-parser');
const cors = require('cors');
const app = express();

app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));
app.use(express.static('public'));
app.use(cors());

let pagina = [
    {
        id: 1,
        historia: "Do lado de fora da casa está caindo uma tempestade. As gotas de chuva se chocam fortemente contra o chão, as paredes e o telhado. É possível ouvir o vento balançando cada folha das árvores da rua, ele carrega a chuva, aumentando sua velocidade. O céu está escuro como nunca esteve, as nuvens pesadas criam raios e trovões que rugem como leões, fazendo as paredes tremerem.<br> ${variavel} continua dormindo, escondendo-se embaixo de suas cobertas. Fingindo não ouvir o mundo caindo lá fora. ( ) franze a testa quando sente um pingo de água cair em seu rosto. Depois outra e mais outra. ( ) vira-se na cama tentando fugir das goteiras, quando ouve o telhado de sua casa desabando, causando um barulho muito alto. ( ) levanta-se com um sobressalto, olhando pelo quarto. Havia pedaços de madeira, cerâmica e concreto do chão. Do buraco no teto caía tanta água quanto uma cascata. Um trovão rugiu ao mesmo tempo que um raio iluminou o cômodo tal qual a luz do dia e ( ) pôde ver a água subindo, inundando desenfreadamente seu quarto.<br>Com desespero, ( ) levantou da cama, molhando seus pés descalços. Correu até a porta e agarrou a maçaneta ao tentar abri-la. Sacudiu a porta com força algumas vezes até perceber que a mesma estava trancada. ( ) nunca trancava a porta do seu quarto antes de ir dormir. Olhou bem a fechadura, já não havia espaço para se pôr uma chave. Pedia uma senha numérica. As paredes tremeram com outro trovão, assim como suas pernas. A água subia, estava quase alcançando os seus joelhos. ( ) correu até as janelas, talvez fosse uma alternativa mais rápida de fuga, mas não teve sucesso. Decidiu procurar pela senha.<br>Abriu as gavetas da cômoda até encontrar um caderno. Só poderia estar alí. Folheou rapidamente tentando encontrar onde havia anotado. Porém tudo que encontrou foram contas e mais contas de matemática. Uma em específico que lhe tirou do sério ao trazer a lembrança da dor de cabeça que tivera. Quase três páginas de conta para que, no final de tudo, o resultado fosse 1. Largou o caderno, não havia nada lá.<br>Procurou na estante, vasculhou cada fileira, tirou tudo de lugar. Sequer um papelzinho. Mexeu tanto em todos os objetos do móvel que acabou derrubando seu jarro com trevos de 4 folhas na água. Seu coração apertou, gostava de suas plantinhas. Mas o mais importante agora era fugir.<br>Andou até sua cama, a água já em sua cintura atrapalhando a locomoção. Haviam alguns objetos na cabeceira. Pequenos coelhinhos de porcelana, 7 delesNenhuma senha. Um raio caiu tão próximo dali que fez ( ) gritar, tamanho o estrondo. Precisava sair, precisava ajudar sua família a salvar o que restasse da casa. Voltou para a porta, resolveu tentar a sorte.<br> Abriu! ( ) jogou-se contra a porta com tanta ânsia que acabou por cair no chão gramado. Sentiu as gotas de chuva molharem suas costas e sua cabeça. Demorou para entender o que estava acontecendo. ( ) ergueu-se do chão e reparou onde estava. Era uma floresta, uma floresta onde nunca esteve antes. Virou-se para trás, e já não existia mais casa, quarto ou porta alguma. Somente árvores, chuva e escuridão. <br>— O que está acontecendo comigo? — ( ) se pergunta baixinho.<br>( ) precisava sair da chuva antes que um raio caísse na sua cabeça. Uma fileira de árvores formava o que parecia ser um caminho. ( ) teve a impressão de que, lá no final, havia uma luz. Resolveu seguir em frente até encontrar algum lugar onde pudesse se abrigar. ( ) não sabia exatamente quanto tempo estava caminhando, mas suas pernas começavam a cansar. Seu corpo tremia de frio toda vez que o vento gélido passava por si, trazendo mais gotas de chuva. Seus pés, sujos de lama e grama começavam pinicar quando avistou um banco de madeira sendo iluminado por um poste. Ele estava coberto por um alpendre de madeira. Lembrava levemente uma parada de ônibus, só que bonita. Se protegeu ali embaixo e se sentou no banco. Ao lado do assento residia um porta-guarda-chuvas e, ao lado deste, um par de galochas. Pendurado na parede do alpendre, estava uma toalha e um cachecol. Parecia que alguém havia esquecido aquelas coisas ali, convenientemente. <br>Após se secar com a toalha, ( ) calçou as galochas, enrolou o cachecol em seu pescoço e escolheu um dos guarda-chuvas que estavam lá. O frio já não era tão cruel. Prometeu em voz baixa que iria devolver os pertences um dia.<br>( ) suspirou e olhou a estrada de terra se estender pelo horizonte escuro. Dali para frente o caminho era iluminado por postes fracos. ( ) não sabia se deveria esperar que alguém aparecesse ou se deveria seguir em frente.<br>Talvez fosse arriscado demais, poderia se perder mais do que já estava. Ou encontrar a morte. Se ao menos tivesse a garantia de que não seria doloroso, ( ) não se importaria de encontrá-la agora.<br>— Croc. — ( ) ouviu um coaxar e olhou em sua direção. Um sapo. Ele olhava em seus olhos, tinha quase certeza. — Croc. — soou de novo e pulou para o lado de ( ). De início, ( ) se espantou, mas então aceitou a companhia.<br>Após alguns segundos em que somente o barulho da chuva podia ser ouvido, ( ) percebeu que seu corpo pedia para que fizesse alguma coisa. Que tomasse alguma decisão, qualquer uma. Soltou um suspiro longo. Ousou dar um passo tímido, dois, e então abriu o guarda-chuva. Precisava seguir em frente, ( ) não sabia muito bem o porquê, mas sentia que precisava.<br>Começou a caminhar, percebendo que o sapo lhe seguia. Achou curioso, mas não se opôs. O barulho do animal pulando pelo menos fazia com que não se sentisse completamente só. Andou, andou e andou mais um pouquinho, pulando em algumas poças de lama para imitar o novo amigo anfíbio. Estava começando a se divertir minimamente, quando se deparou com um grande salgueiro no meio do caminho. Embaixo dele chovia menos, a água encontrava dificuldade para atravessar os galhos e folhas. Era uma árvore bonita. Observou ( ).<br>— Olá, ( ). — ( ) assustou-se ao ouvir uma voz feminina vindo de cima. Era uma moça, ela estava sentada num dos galhos do salgueiro. Seus cabelos eram longos e negros e ela possuia asas transparentes, porém brilhantes.<br>— Oi…? — respondeu ( ). — Espera, como você sabe meu nome?! — se espantou.<br>— Você já me disse uma vez. — disse ela calmamente.<br>— Que lugar é este? Eu morri? Ou surtei?<br>— Você não reconhece mais este lugar? — ( ) negou. — Este mundo era um lugar muito bonito. Mas pararam de cuidar dele, e ele foi morrendo aos poucos. Monstros foram tomando de conta. Está desmoronando, e se continuar assim, vai ser destruído completamente. Você precisa fazer alguma coisa, ( )!<br>— Eu só quero voltar pra casa. — ( ) sentia o cansaço tomar conta de si. A fada suspirou e assentiu.<br>— Você pode seguir em frente. Uma hora voltará para casa.<br>— E isso vai demorar?<br>— Eu não posso garantir. Mas eu gostaria de avisar que pode ser difícil. Precisará enfrentar os monstros no meio do caminho.<br>— E como eu deveria fazer isso?<br>— Pode usar seu guarda-chuva para atacar e se defender. Ademais, não está só, não é mesmo? Tem um amigo ao seu lado para lhe ajudar! — ela se referiu ao sapinho que ainda estava ao lado de ( ).<br>— Croc. — soou o sapo quase que alegremente. ( ) sorriu para o anfíbio.<br>— Fada, pode me chamar de Fada. Ah, quase me esqueci! Tem uma bolsa alí no pé da árvore. Dentro dela tem um saquinho com bolinhos de chuva, eles podem ajudar a recuperar as forças mais rápido. Se quiser, pode pegar.<br>— Ah, ok! — ( ) pegou a bolsa e começou a andar para longe dali. — Até a próxima!<br>— Boa sorte! Espero que perceba que este mundo precisa de você. — a Fada sussurrou a última frase.<br>— O que? — ( ) olhou para trás, mas não havia mais fada ou árvore nenhuma.<br>( ) continuou andando caminho adentro. A chuva se negava a parar por um instante. Às vezes ela se tornava mais branda, mas era questão de tempo até que se revoltasse novamente. O céu, quando não estava branco pelos raios, estava completamente acinzentado. Escuro. O que dificultava que ( ) enxergasse muito longe, mesmo com os postes. Entretanto, escuridão nenhuma seria capaz de esconder aquilo. ( ) paralisou onde estava quando ouviu o som de algo gosmento vindo em sua direção. O bicho chegou mais perto da luz e foi possível vê-lo completamente.<br>A coisa possuía um corpo cilíndrico e alongado, tinha uma coloração escura, era gosmento e rastejava. Em uma das pontas de seu corpo havia uma boca com uma arcada dentária circular repleta de dentes afiados e desregulares. Ela babava e emitia um som irritante. Era nojento. ( ) fez um som enojado e tapou a boca logo em seguida. Apesar de não ter olhos, a coisa que mais parecia uma minhoca gigante se virou na direção exata onde ( ) estava e começou a se aproximar de forma ameaçadora.<br>A primeira reação que ( ) teve foi de se afastar. De repente, lembrou-se do que a Fada lhe dissera. Podia usar o guarda-chuva. Mas será que um simples guarda-chuva seria suficiente contra aquela coisa? ( ) segurou o objeto com mais firmeza, suas pernas tremiam e sua respiração falhava. Se algo desse errado por causa de sua incompetência, aquele monstro lhe faria seu jantar, e seria doloroso. Precisava fazer alguma coisa. Seria capaz de fazer alguma coisa?<br>"
    },
    {
        id: 2,
        historia:"fegwgwrg"

    },
    {
        id: 3,
        historia: "fdgdfgfgd"
    },
    {
        id: 4,
        historia: "dfgdfgdgd"
    }
  ]

app.listen(3000, () => console.log('server started'));

app.get('/', (req, res) => {
  res.sendFile('public/index.html');
});

app.get('/pagina', (req, res) => {
  res.json(pagina);
});

app.get('/pagina/:id', (req, res) => {
    let id = req.params.id;
    let prod = pagina.filter(p => p.id == id)[0];
    res.json(prod);    
});
